import{r as v,j as s,aa as L,w as O,b as l,c as x,d as o,A as b,q as c,t as u,u as d,F as R,z as T,v as g,e as C,O as E}from"./index-Cu3QcvOp.js";import{u as W}from"./vuex.esm-bundler-CuEAE9ua.js";import{u as j}from"./index-BBkL1TfT.js";import{CFormSelect as q,CButton as h,CInputGroup as z}from"./index.es-fMuEa2gX.js";import{c as G}from"./plugins-B_Y7fZCS.js";import"./index-BWIQLakd.js";const H={class:"container d-flex align-items-stretch"},M={class:"row align-items-stretch flex-fill"},J={class:"bg-body p-3"},K={class:"row mb-3"},Q=o("label",{for:"experimentClassSelect",class:"col-sm-2 col-form-label"},"Choose an experiment",-1),X={class:"col-sm-10"},Y=["value"],oe={__name:"NewExperimentForm",setup(Z){const a=W(),y=j(),r=v(void 0),m=v({}),P=v(!1),S=s(()=>a.getters["plugins/getExperimentsPlugins"]),k=e=>a.getters["plugins/getPlugin"](e),f=s(()=>a.getters["machine/isDisconnected"]),w=s(()=>{let e={none:"Select an option..."};return S.value.forEach(t=>{e[t.id]=t.name}),e}),p=s(()=>{const e=k(r.value);if(!e)return{title:"No experiment selected",description:{template:" "},parameters:{template:" "}};let t={title:e.name};return e.ui_modules.forEach(n=>{t[n.kind]=L({loader:G(n.path)})}),t}),V=s(()=>p.value.description),B=s(()=>p.value.parameters),N=s(()=>p.value?p.value.title:"Untitiled Experiment");O(r,(e,t)=>{m.value={}});function U(e){m.value=e}function D(){a.dispatch("experiment/startExperiment",{pluginId:r.value,parameters:m.value}).then(()=>{y.push({name:"Home"})}).catch(e=>{const t=e.response.data.error||e.response.data;a.dispatch("notifyWarning",{content:t})})}function F(){_("stop")}function I(){_("pause")}function _(e,t){const n={experimentId:r,command:e,...t};a.dispatch("experiment/experimentCommand",n).catch(i=>{const A=i.response.data.error||i.response.data;a.dispatch("notifyWarning",{content:A})})}return(e,t)=>(l(),x("div",H,[o("div",M,[o("div",J,[o("h4",null,b(N.value),1),o("form",null,[o("div",K,[Q,o("div",X,[c(d(z),null,{default:u(()=>[c(d(q),{id:"experimentClassSelect",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n),"aria-label":"Select experiment class",disabled:P.value},{default:u(()=>[(l(!0),x(R,null,T(w.value,(n,i)=>(l(),x("option",{key:i,value:i},b(n),9,Y))),128))]),_:1},8,["modelValue","disabled"]),c(d(h),{type:"button",color:"success",variant:"outline",disabled:f.value,onClick:D},{default:u(()=>[g("Start")]),_:1},8,["disabled"]),c(d(h),{type:"button",color:"warning",variant:"outline",disabled:f.value,onClick:I},{default:u(()=>[g("Pause")]),_:1},8,["disabled"]),c(d(h),{type:"button",color:"danger",variant:"outline",disabled:f.value,onClick:F},{default:u(()=>[g("Stop")]),_:1},8,["disabled"])]),_:1})])])]),(l(),C(E(V.value))),(l(),C(E(B.value),{onUpdateParameters:U},null,32))])])]))}};export{oe as default};
//# sourceMappingURL=NewExperimentForm-CGOMRqGP.js.map
