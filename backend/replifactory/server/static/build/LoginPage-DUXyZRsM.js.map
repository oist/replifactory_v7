{"version":3,"file":"LoginPage-DUXyZRsM.js","sources":["../../../vue/src/client/pages/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex align-items-center py-4 h-100\">\n    <MachineNotification />\n    <main class=\"form-signin w-100 m-auto\">\n      <form v-if=\"!authorized\" @submit.prevent=\"login\">\n        <img class=\"mb-4\" :src=\"`${publicPath}favicon.svg`\" alt=\"\" width=\"72\" height=\"57\" />\n        <h1 class=\"h3 mb-3 fw-normal\">Please sign in</h1>\n\n        <div class=\"form-floating\">\n          <input id=\"floatingInput\" v-model=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\" name=\"email\" />\n          <label for=\"floatingInput\">Email address</label>\n        </div>\n        <div class=\"form-floating\">\n          <input id=\"floatingPassword\" v-model=\"password\" type=\"password\" class=\"form-control\" placeholder=\"Password\"\n            name=\"password\" />\n          <label for=\"floatingPassword\">Password</label>\n        </div>\n\n        <div class=\"form-check text-start my-3\">\n          <input id=\"flexCheckDefault\" class=\"form-check-input\" type=\"checkbox\" value=\"remember-me\" name=\"remember_me\" />\n          <label class=\"form-check-label\" for=\"flexCheckDefault\">\n            Remember me\n          </label>\n        </div>\n        <button class=\"btn btn-primary w-100 py-2\" type=\"submit\">\n          Sign in\n        </button>\n        <p class=\"mt-3 mb-3 text-body-secondary\">\n          <BootstrapRouterLink to=\"/man\" class=\"text-decoration-none\"> Help </BootstrapRouterLink>\n        </p>\n      </form>\n      <div v-else class=\"m-auto\">\n        <p>You have already logged in.</p>\n        <a href=\"/\" class=\"btn btn-success\">Go to home</a>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport MachineNotification from \"@/client/components/machine/MachineNotification.vue\";\nimport { mapGetters } from \"vuex\";\nimport BootstrapRouterLink from \"@/client/router/BootstrapRouterLink.vue\";\n\n\nexport default {\n  name: \"LoginPage\",\n  components: {\n    MachineNotification,\n    BootstrapRouterLink,\n  },\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      publicPath: import.meta.env.BASE_URL,\n    };\n  },\n  computed: {\n    ...mapGetters(\"security\", [\"authorized\"]),\n  },\n  created() {\n    if (this.authorized) {\n      this.$router.push(\"/\");\n    }\n  },\n  methods: {\n    login() {\n      this.$store\n        .dispatch(\"security/login\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then(() => {\n          this.$router.push(this.$route.query.next || '/');\n        })\n        .catch((err) => {\n          if (err.response.status == 400) {\n\n            this.$store.dispatch(\"notifyWarning\", {\n              content: err.response.data.response.errors,\n            });\n          } else {\n            this.$store.dispatch(\"notifyDanger\", {\n              content: err.response.statusText,\n            });\n          }\n        });\n    },\n  },\n};\n</script>\n\n<style>\n.form-signin {\n  max-width: 330px;\n  padding: 1rem;\n}\n\nhtml,\nbody {\n  height: 100%;\n}\n</style>\n"],"names":["_sfc_main","MachineNotification","BootstrapRouterLink","mapGetters","err","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createElementVNode","_hoisted_11","_hoisted_13","_hoisted_14","_openBlock","_createElementBlock","_createVNode","_component_MachineNotification","_ctx","_hoisted_12","_hoisted_15","_cache","_withModifiers","$options","args","$data","$event","_hoisted_9","_hoisted_10","_component_BootstrapRouterLink","_withCtx","_createTextVNode"],"mappings":"2WA6CA,MAAKA,EAAU,CACb,KAAM,YACN,WAAY,CACV,oBAAAC,EACA,oBAAAC,CACF,EACA,MAAO,CACE,MAAA,CACL,MAAO,GACP,SAAU,GACV,WAAY,GAAA,CAEhB,EACA,SAAU,CACR,GAAGC,EAAW,WAAY,CAAC,YAAY,CAAC,CAC1C,EACA,SAAU,CACJ,KAAK,YACF,KAAA,QAAQ,KAAK,GAAG,CAEzB,EACA,QAAS,CACP,OAAQ,CACD,KAAA,OACF,SAAS,iBAAkB,CAC1B,MAAO,KAAK,MACZ,SAAU,KAAK,QAAA,CAChB,EACA,KAAK,IAAM,CACV,KAAK,QAAQ,KAAK,KAAK,OAAO,MAAM,MAAQ,GAAG,CAAA,CAChD,EACA,MAAOC,GAAQ,CACVA,EAAI,SAAS,QAAU,IAEpB,KAAA,OAAO,SAAS,gBAAiB,CACpC,QAASA,EAAI,SAAS,KAAK,SAAS,MAAA,CACrC,EAEI,KAAA,OAAO,SAAS,eAAgB,CACnC,QAASA,EAAI,SAAS,UAAA,CACvB,CACH,CACD,CACL,CACF,CACF,EAzFOC,EAAA,CAAA,MAAM,wCAEHC,EAAA,CAAA,MAAM,4BAHhBC,EAAA,CAAA,KAAA,EAMQC,IAAiD,KAA7C,CAAA,MAAM,qBAAoB,iBAAc,EAAA,EAEvCC,EAAA,CAAA,MAAM,iBAETC,IAAgD,QAAzC,CAAA,IAAI,iBAAgB,gBAAa,EAAA,EAErCC,EAAA,CAAA,MAAM,iBAGTC,IAA8C,QAAvC,CAAA,IAAI,oBAAmB,WAAQ,EAAA,IAQlCC,EAAA,MAAA,CALD,MAAM,8BAA4B,GAC0E,QAAA,CAAxG,GAAG,mBAAmB,MAAM,mBAAmB,KAAK,WAAW,MAAM,cAAc,KAAK,aAAA,KAGvF,QAAA,CAFD,MAAM,mBAAmB,IAAI,oBAAmB,eAEvD,WAIO,SAAA,CAFD,MAAM,6BAA6B,KAAK,UAAS,YAEzD,EAAA,EACGC,EAAA,CAAA,MAAM,oCA3BjB,IAAA,EA+BkB,MAAM,UAChBC,EAAAF,EAAkC,SAA/B,8BAA2B,EAAA,MACoB,IAAA,CAA/C,KAAK,IAAI,MAAM,mBAAkB,aAAU,EAAA,KAD9CE,EACAC,uFAhCN,OAAAC,EAAA,EAAAC,EAmCM,MAnCNb,EAmCM,CAlCJc,EAAuBC,CAAA,EACvBP,EAgCO,OAhCPP,EAgCO,CA/BQe,EAAU,gBA2BvBH,EAGM,MAHNI,EA/BNC,CAAA,QAIML,EA0BO,OAAA,CA9Bb,IAAA,EAIgC,SAAMM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAJtCC,UAIgDC,EAAK,OAAAA,EAAA,MAAA,GAAAC,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,GAC7Cd,EAAoF,MAAA,CAA/E,MAAM,OAAQ,OAAQe,EAAU,UAAA,cAAe,IAAI,GAAG,MAAM,KAAK,OAAO,IAAA,EALrF,KAAA,EAAArB,CAAA,EAMQC,EAEAK,EAGM,MAHNJ,EAGM,GAFJI,EAA+G,QAAA,CAAxG,GAAG,gBATpB,sBAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAS6CK,GAAAD,EAAK,MAAAC,GAAE,KAAK,QAAQ,MAAM,eAAe,YAAY,QAAQ,KAAK,OAAA,gBAAlED,EAAK,KAAA,CAAA,GACxClB,CAAA,GAEFG,EAIM,MAJNF,EAIM,GAHJE,EACoB,QAAA,CADb,GAAG,mBAbpB,sBAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAagDK,GAAAD,EAAQ,SAAAC,GAAE,KAAK,WAAW,MAAM,eAAe,YAAY,WAC/F,KAAK,UAAA,gBAD+BD,EAAQ,QAAA,CAAA,GAE9ChB,CAAA,GAGFkB,EAMAC,EAGAlB,EAEI,IAFJC,EAEI,CADFK,EAAwFa,EAAA,CAAnE,GAAG,OAAO,MAAM,sBAAA,GA5B/C,QAAAC,EA4BsE,IAAM,CA5B5EC,EA4BsE,QAAM,CAAA,GA5B5E,EAAA,CAAA,UAAA"}