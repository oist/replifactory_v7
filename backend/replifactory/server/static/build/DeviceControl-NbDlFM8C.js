import{b as V,m as S,a as q,d as G}from"./vuex.esm-bundler-CuEAE9ua.js";import{b as m,c as k,d as D,A as C,B as h,L as I,a as s,a9 as P,e as f,t as i,V as T,q as l,v as c,M as K,F as H,z as X}from"./index-Cu3QcvOp.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{CButton as F,CButtonGroup as A,CFormRange as j,CCard as E,CCardBody as N,CCardTitle as R,CCardSubtitle as L,CFormInput as O,CFormCheck as J,CInputGroup as z,CInputGroupText as W,CCollapse as Q,CRow as Y}from"./index.es-fMuEa2gX.js";import{C as U}from"./index.es-DYZfjILo.js";const Z={name:"ValvesGroupControl",components:{},props:{disabled:{type:Boolean,default:!1},width:{type:String,default:"75px"},height:{type:String,default:"160px"},odSensorId:{type:String,default:null},reactorId:{type:Number,required:!0}},computed:{data(){return this.getDeviceById(this.odSensorId)},...V("machine",["getDeviceById"]),...S(["debug"]),od(){const t=this.data.value;return t!=null?t.toPrecision(3):"N/A"},background(){const t=this.data.background;return t!=null?t.toPrecision(3):"N/A"},transmitted(){const t=this.data.transmitted;return t!=null?t.toPrecision(3):"N/A"}},methods:{updateOpticalDensity(t){console.debug(t),this.$store.dispatch("machine/reactorCommand",{reactorId:this.reactorId,command:"measure_od"}).then(d=>{console.debug(d)}).catch(d=>{this.$store.dispatch("notifyWarning",{content:d.response.data})})}}},$={class:"progress-bar",role:"progressbar","aria-valuenow":"30","aria-valuemin":"0","aria-valuemax":"100",style:{height:"30%"}},ee={class:"sr-only"},te={key:0,class:"sr-only"},le={key:1,class:"sr-only"};function de(t,d,e,g,a,r){return m(),k("div",{class:I(["progress progress-bar-vertical update-button",e.disabled?"disabled":""]),onClick:d[0]||(d[0]=(..._)=>r.updateOpticalDensity&&r.updateOpticalDensity(..._))},[D("div",$,[D("span",ee,"OD: "+C(r.od),1),t.debug?(m(),k("span",te,"BG: "+C(r.background),1)):h("",!0),t.debug?(m(),k("span",le,"TR: "+C(r.transmitted),1)):h("",!0)])],2)}const ie=y(Z,[["render",de]]),ae={name:"ValveControl",components:{CButton:F,CButtonGroup:A,CIcon:U},props:{disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},title:{type:String,default:"Valve"},deviceId:{type:String,required:!0},reactorId:{type:Number,required:!0}},computed:{closeButtonClasses(){let t="";return this.vertical&&(t+="rounded-top-5"),this.state==="CLOSE"&&(t+=" active"),t},openButtonClasses(){let t="";return this.vertical&&(t+="rounded-bottom-5"),this.state==="OPEN"&&(t+=" active"),t},data(){return this.getDeviceById(this.deviceId)},stateText(){return this.data!=null?this.data.state_string:"Undefined"},state(){return this.data!=null?this.data.state_id:"UNDEFINED"},...V("machine",["getDeviceById"])},methods:{toggle(){},test(){},async close(){await this.sendCommand("close_valve")},async open(){await this.sendCommand("open_valve")},async sendCommand(t){this.loading=!0,this.showAlert=!1,this.$store.dispatch("machine/reactorCommand",{reactorId:this.reactorId,command:t}).then(d=>{console.debug(d)}).catch(d=>{this.loading=!1,this.error=d.response.data,this.showAlert=!0})}}};function re(t,d,e,g,a,r){const _=s("CIcon"),p=s("CButton"),v=s("CButtonGroup"),n=P("c-tooltip");return m(),f(v,{class:"valve-buttons",vertical:e.vertical,size:"sm",role:"group","aria-label":"Valve control buttons"},{default:i(()=>[T((m(),f(p,{color:"danger",class:I(r.closeButtonClasses),disabled:e.disabled,variant:"outline",onClick:r.close},{default:i(()=>[l(_,{icon:"cilX",size:"xl"})]),_:1},8,["class","disabled","onClick"])),[[n,{content:"Close",placement:"top"}]]),T((m(),f(p,{color:"warning",class:I(["BEETWEEN","OPENING","CLOSING"].includes(r.state)?"active":""),disabled:e.disabled,variant:"outline"},{default:i(()=>[l(_,{icon:"cilLoopCircular",size:"xl"})]),_:1},8,["class","disabled"])),[[n,{content:"Beetween",placement:"top"}]]),T((m(),f(p,{color:"success",class:I(r.openButtonClasses),disabled:e.disabled,variant:"outline",onClick:r.open},{default:i(()=>[l(_,{icon:"cilCheckAlt",size:"xl"})]),_:1},8,["class","disabled","onClick"])),[[n,{content:"Open",placement:"top"}]])]),_:1},8,["vertical"])}const oe=y(ae,[["render",re]]),se={name:"LaserControl",components:{CButton:F,CButtonGroup:A,CIcon:U},props:{disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},title:{type:String,default:"Laser"},deviceId:{type:String,required:!0},reactorId:{type:Number,required:!0}},computed:{offButtonClasses(){let t="";return this.vertical&&(t+="rounded-top-5"),this.state==="OFF"&&(t+=" active"),t},onButtonClasses(){let t="";return this.vertical&&(t+="rounded-bottom-5"),this.state==="ON"&&(t+=" active"),t},data(){return this.getDeviceById(this.deviceId)},stateText(){return this.data!=null?this.data.state_string:"Undefined"},state(){return this.data!=null?this.data.state_id:"UNDEFINED"},...V("machine",["getDeviceById"])},methods:{toggle(){},test(){},async switch_off(){await this.sendCommand("laser_off")},async switch_on(){await this.sendCommand("laser_on")},async sendCommand(t){this.loading=!0,this.showAlert=!1,this.$store.dispatch("machine/reactorCommand",{reactorId:this.reactorId,command:t}).then(d=>{console.debug(d)}).catch(d=>{this.loading=!1,this.error=d.response.data,this.showAlert=!0})}}};function ne(t,d,e,g,a,r){const _=s("CIcon"),p=s("CButton"),v=s("CButtonGroup"),n=P("c-tooltip");return m(),f(v,{class:"laser-buttons",vertical:e.vertical,size:"sm",role:"group","aria-label":"Laser control buttons"},{default:i(()=>[T((m(),f(p,{color:"danger",class:I(r.offButtonClasses),disabled:e.disabled,variant:"outline",onClick:r.switch_off},{default:i(()=>[l(_,{icon:"cilLightbulb",size:"xl"})]),_:1},8,["class","disabled","onClick"])),[[n,{content:"Off",placement:"top"}]]),T((m(),f(p,{color:"success",class:I(r.onButtonClasses),disabled:e.disabled,variant:"outline",onClick:r.switch_on},{default:i(()=>[l(_,{icon:"cilLightbulb",size:"xl"})]),_:1},8,["class","disabled","onClick"])),[[n,{content:"On",placement:"top"}]])]),_:1},8,["vertical"])}const ce=y(se,[["render",ne]]),ue={name:"StirrerControl",components:{CFormRange:j},props:{disabled:{type:Boolean,default:!1},deviceId:{type:String,required:!0},reactorId:{type:Number,required:!0}},data(){return{min:0,max:100,step:1}},computed:{data(){return this.getDeviceById(this.deviceId)},value(){return(this.data.speed*100|0).toString()},...V("machine",["getDeviceById"])},methods:{handleChange(t){console.debug(t),this.$store.dispatch("machine/reactorCommand",{reactorId:this.reactorId,command:"stirrer",speed_ratio:parseFloat(t.target.value)/100}).then(d=>{console.debug(d)}).catch(d=>{this.$store.dispatch("notifyWarning",{content:d.response.data})})}}};function me(t,d,e,g,a,r){const _=s("CFormRange");return m(),k("div",null,[l(_,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=p=>r.value=p),min:a.min,max:a.max,step:a.step,disabled:e.disabled,onInput:r.handleChange},null,8,["modelValue","min","max","step","disabled","onInput"]),D("span",null,C(r.value),1)])}const be=y(ue,[["render",me]]),pe={components:{VialControl:ie,Valve:oe,LaserControl:ce,Stirrer:be,CCard:E,CCardBody:N,CCardTitle:R,CCardSubtitle:L},props:{disabled:{type:Boolean,default:!1},id:{type:Number,default:0},title:{type:String,default:null},subtitle:{type:String,default:null},valveId:{type:String,default:null},valveTitle:{type:String,default:null},laserId:{type:String,default:null},laserTitle:{type:String,default:null},stirrerId:{type:String,default:null},stirrerTitle:{type:String,default:null},odSensorId:{type:String,default:null},odSensorTitle:{type:String,default:null}},computed:{reactor(){return{id:this.id,title:this.title!=null?this.title:`Reactor ${this.id}`,subtitle:this.subtitle!=null?this.subtitle:"Lactobacillus plantarum"}},valve(){return{id:this.valveId!=null?this.valveId:`valve-${this.id}`,title:this.valveTitle!=null?this.valveTitle:`Valve ${this.id}`}},laser(){return{id:this.laserId!=null?this.laserId:`laser-${this.id}`,title:this.laserTitle!=null?this.laserTitle:`Laser ${this.id}`}},stirrer(){return{id:this.stirrerId!=null?this.stirrerId:`stirrer-${this.id}`,title:this.stirrerTitle!=null?this.stirrerTitle:`Stirrer ${this.id}`}},odSensor(){return{id:this.odSensorId!=null?this.odSensorId:`optical-density-sensor-${this.id}`,title:this.odSensorTitle!=null?this.odSensorTitle:`Optical Density Sensor ${this.id}`}},...S(["debug"])}};function fe(t,d,e,g,a,r){const _=s("CCardTitle"),p=s("CCardSubtitle"),v=s("Valve"),n=s("VialControl"),u=s("LaserControl"),b=s("Stirrer"),B=s("CCardBody"),x=s("CCard");return m(),f(x,{style:{width:"12rem"},class:"m-2"},{default:i(()=>[l(B,null,{default:i(()=>[l(_,null,{default:i(()=>[c(C(r.reactor.title),1)]),_:1}),l(p,{class:"mb-2 text-muted"},{default:i(()=>[c(C(r.reactor.subtitle),1)]),_:1}),t.debug?(m(),f(v,{key:r.valve.id,"reactor-id":r.reactor.id,class:"my-1","device-id":r.valve.id,title:r.valve.title,disabled:e.disabled},null,8,["reactor-id","device-id","title","disabled"])):h("",!0),l(n,{"od-sensor-id":r.odSensor.id,"reactor-id":r.reactor.id,disabled:e.disabled,class:"my-2 mx-0",height:"100px"},null,8,["od-sensor-id","reactor-id","disabled"]),t.debug?(m(),f(u,{key:r.laser.id,"reactor-id":r.reactor.id,"device-id":r.laser.id,title:r.laser.title,disabled:e.disabled},null,8,["reactor-id","device-id","title","disabled"])):h("",!0),(m(),f(b,{key:r.stirrer.id,"reactor-id":r.reactor.id,"device-id":r.stirrer.id,title:r.stirrer.title,disabled:e.disabled},null,8,["reactor-id","device-id","title","disabled"]))]),_:1})]),_:1})}const _e=y(pe,[["render",fe]]),ve={name:"PumpControl",components:{CCard:E,CCardBody:N,CButton:F,CFormInput:O,CFormCheck:J,CIcon:U,CInputGroup:z,CInputGroupText:W,CCardTitle:R,CCollapse:Q},props:{disabled:{type:Boolean,default:!1},label:{type:String,default:"Valve"},deviceId:{type:String,required:!0}},data(){return{inputVolume:"",inputSpeed:"",motor:{profile:{acceleration:0,deceleration:0,max_speed_rps:0,min_speed_rps:0,full_step_speed:0,kval_hold:0,kval_run:0,kval_acc:0,kval_dec:0,intersect_speed:0,start_slope:0,acceleration_final_slope:0,deceleration_final_slope:0,thermal_compensation_factor:0,overcurrent_threshold:0,stall_threshold:0,step_mode:0,alarm_enable:0,clockwise:!1}},motorProfileVisisble:!1}},computed:{data(){return this.getDeviceById(this.deviceId)},motor_profile(){let t;return this.data!=null&&this.data.motor!=null&&this.data.motor.profile!=null?t=this.data.motor.profile:t=this.motor.profile,{acceleration:parseFloat(t.acceleration),deceleration:parseFloat(t.deceleration),max_speed_rps:parseFloat(t.max_speed_rps),min_speed_rps:parseFloat(t.min_speed_rps),full_step_speed:parseInt(t.full_step_speed),kval_hold:parseInt(t.kval_hold),kval_run:parseInt(t.kval_run),kval_acc:parseInt(t.kval_acc),kval_dec:parseInt(t.kval_dec),intersect_speed:parseInt(t.intersect_speed),start_slope:parseInt(t.start_slope),acceleration_final_slope:parseInt(t.acceleration_final_slope),deceleration_final_slope:parseInt(t.deceleration_final_slope),thermal_compensation_factor:parseInt(t.thermal_compensation_factor),overcurrent_threshold:parseInt(t.overcurrent_threshold),stall_threshold:parseInt(t.stall_threshold),step_mode:parseInt(t.step_mode),alarm_enable:parseInt(t.alarm_enable),clockwise:typeof t.clockwise=="string"?t.clockwise.toLowerCase()=="true":t.clockwise}},stateText(){return this.data!=null?this.data.state_string:"Undefined"},state(){return this.data!=null?this.data.state_id:"UNDEFINED"},...V("machine",["getDeviceById"]),...S(["debug"])},watch:{motor_profile(t){this.motor.profile=t}},methods:{convetAccelerationToFloat(){this.motor.profile.acceleration=parseFloat(this.motor.profile.acceleration)},convertDecelerationToFloat(){this.motor.profile.deceleration=parseFloat(this.motor.profile.deceleration)},convetMaxSpeedRPSToFloat(){this.motor.profile.max_speed_rps=parseFloat(this.motor.profile.max_speed_rps)},convetMinSpeedRPSToFloat(){this.motor.profile.min_speed_rps=parseFloat(this.motor.profile.min_speed_rps)},handleReloadButtonClick(){this.$store.dispatch("machine/deviceCommand",{command:"read_state",deviceId:this.deviceId}).then(t=>{console.debug(t)}).catch(t=>{this.$store.dispatch("notifyWarning",{content:t.response.data})})},handlePumpButtonClick(){let t={command:"run",deviceId:this.deviceId};this.inputVolume&&(t.volume=parseFloat(this.inputVolume),t.command="pump"),this.inputSpeed&&(t.rot_per_sec=parseFloat(this.inputSpeed)),this.$store.dispatch("machine/deviceCommand",t).then(d=>{console.debug(d)}).catch(d=>{this.$store.dispatch("notifyWarning",{content:d.response.data})})},handleStopButtonClick(){this.$store.dispatch("machine/machineCommand",{command:"stop_pump",device_id:this.deviceId}).then(t=>{console.debug(t)}).catch(t=>{this.$store.dispatch("notifyWarning",{content:t.response.data})})},handleSetProfileButtonClick(){this.$store.dispatch("machine/deviceCommand",{command:"set_profile",deviceId:this.deviceId,profile:this.motor_profile}).then(t=>{console.debug(t)}).catch(t=>{this.$store.dispatch("notifyWarning",{content:t.response.data})})}}},he={class:"badge text-bg-light"};function Ce(t,d,e,g,a,r){const _=s("CCardTitle"),p=s("CIcon"),v=s("CButton"),n=s("CFormInput"),u=s("CInputGroupText"),b=s("CInputGroup"),B=s("CFormCheck"),x=s("CCardBody"),w=s("CCard"),M=s("CCollapse");return m(),f(w,{style:K(t.debug?"width: 24rem":"width: 16rem"),class:"m-2 pump-control"},{default:i(()=>[l(x,null,{default:i(()=>[l(_,null,{default:i(()=>[c(C(e.label)+" ",1),D("span",he,C(r.state),1)]),_:1}),l(b,{class:"mb-3 buttons-group"},{default:i(()=>[l(v,{type:"button",color:"danger",variant:"outline",class:I(r.state=="OPERATIONAL"?"active":""),disabled:e.disabled,onClick:r.handleStopButtonClick},{default:i(()=>[l(p,{icon:"cilXCircle",size:"xl"})]),_:1},8,["class","disabled","onClick"]),l(v,{type:"button",color:"success",variant:"outline",class:I(r.state=="WORKING"?"active":""),disabled:e.disabled,onClick:r.handlePumpButtonClick},{default:i(()=>[l(p,{icon:"cilShower",size:"xl"})]),_:1},8,["class","disabled","onClick"]),l(n,{id:e.deviceId+"-volume",modelValue:a.inputVolume,"onUpdate:modelValue":d[0]||(d[0]=o=>a.inputVolume=o),placeholder:"∞","aria-label":"Volume","aria-describedby":e.deviceId+"-inputVolumeText",disabled:e.disabled},null,8,["id","modelValue","aria-describedby","disabled"]),l(u,{id:e.deviceId+"-inputVolumeText"},{default:i(()=>[c(" ml ")]),_:1},8,["id"]),t.debug?(m(),f(n,{key:0,id:e.deviceId+"-speed",modelValue:a.inputSpeed,"onUpdate:modelValue":d[1]||(d[1]=o=>a.inputSpeed=o),placeholder:r.data.max_speed_rps,"aria-label":"Speed","aria-describedby":e.deviceId+"-inputSpeedText",disabled:e.disabled},null,8,["id","modelValue","placeholder","aria-describedby","disabled"])):h("",!0),t.debug?(m(),f(u,{key:1,id:e.deviceId+"-inputSpeedText"},{default:i(()=>[c(" rps ")]),_:1},8,["id"])):h("",!0)]),_:1}),t.debug?(m(),f(v,{key:0,color:"primary",href:"#",onClick:d[2]||(d[2]=o=>a.motorProfileVisisble=!a.motorProfileVisisble)},{default:i(()=>[c(C(a.motorProfileVisisble?"Hide profile":"Show profile"),1)]),_:1})):h("",!0),t.debug?(m(),f(v,{key:1,color:"primary",variant:"outline",disabled:e.disabled,class:"ms-1",onClick:r.handleReloadButtonClick},{default:i(()=>[l(p,{icon:"cilReload"})]),_:1},8,["disabled","onClick"])):h("",!0),t.debug?(m(),f(M,{key:2,visible:a.motorProfileVisisble},{default:i(()=>[l(w,{class:"mt-3"},{default:i(()=>[l(x,null,{default:i(()=>[l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-acceleration-text"},{default:i(()=>[c(" Acceleration (steps/sec²) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-acceleration",modelValue:a.motor.profile.acceleration,"onUpdate:modelValue":d[3]||(d[3]=o=>a.motor.profile.acceleration=o),modelModifiers:{number:!0},type:"number",min:"14.55",max:"59590",step:"14.55","aria-label":e.deviceId+" acceleration","aria-describedby":e.deviceId+"-profile-acceleration-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-deceleration-text"},{default:i(()=>[c(" Deceleration (steps/sec²) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-deceleration",modelValue:a.motor.profile.deceleration,"onUpdate:modelValue":d[4]||(d[4]=o=>a.motor.profile.deceleration=o),modelModifiers:{number:!0},type:"number",min:"14.55",max:"59590",step:"14.55","aria-label":e.deviceId+" deceleration","aria-describedby":e.deviceId+"-profile-deceleration-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-max_speed_rps-text"},{default:i(()=>[c(" Max Speed (rps) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-max_speed_rps",modelValue:a.motor.profile.max_speed_rps,"onUpdate:modelValue":d[5]||(d[5]=o=>a.motor.profile.max_speed_rps=o),modelModifiers:{number:!0},type:"number",min:"0.07625",max:"78.05",step:"0.07625","aria-label":e.deviceId+" max speed rps","aria-describedby":e.deviceId+"-profile-max_speed_rps-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-min_speed_rps-text"},{default:i(()=>[c(" Min Speed (rps) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-min_speed_rps",modelValue:a.motor.profile.min_speed_rps,"onUpdate:modelValue":d[6]||(d[6]=o=>a.motor.profile.min_speed_rps=o),modelModifiers:{number:!0},type:"number",min:"0",max:"4.8815",step:"0.00119","aria-label":e.deviceId+" min speed rps","aria-describedby":e.deviceId+"-profile-min_speed_rps-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-full_step_speed-text"},{default:i(()=>[c(" Full Step Speed (rps) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-full_step_speed",modelValue:a.motor.profile.full_step_speed,"onUpdate:modelValue":d[7]||(d[7]=o=>a.motor.profile.full_step_speed=o),modelModifiers:{number:!0},type:"number",min:"0.03815",max:"78.125",step:"0.07625","aria-label":e.deviceId+" full step speed","aria-describedby":e.deviceId+"-profile-full_step_speed-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-kval_hold-text"},{default:i(()=>[c(" Kval Hold (Vs x K) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-kval_hold",modelValue:a.motor.profile.kval_hold,"onUpdate:modelValue":d[8]||(d[8]=o=>a.motor.profile.kval_hold=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.996",step:"0.004","aria-label":e.deviceId+" kval hold","aria-describedby":e.deviceId+"-profile-kval_hold-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-kval_run-text"},{default:i(()=>[c(" Kval Run (Vs x K) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-kval_run",modelValue:a.motor.profile.kval_run,"onUpdate:modelValue":d[9]||(d[9]=o=>a.motor.profile.kval_run=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.996",step:"0.004","aria-label":e.deviceId+" kval run","aria-describedby":e.deviceId+"-profile-kval_run-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-kval_acc-text"},{default:i(()=>[c(" Kval Acc (Vs x K) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-kval_acc",modelValue:a.motor.profile.kval_acc,"onUpdate:modelValue":d[10]||(d[10]=o=>a.motor.profile.kval_acc=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.996",step:"0.004","aria-label":e.deviceId+" kval acc","aria-describedby":e.deviceId+"-profile-kval_acc-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-kval_dec-text"},{default:i(()=>[c(" Kval Dec (Vs x K) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-kval_dec",modelValue:a.motor.profile.kval_dec,"onUpdate:modelValue":d[11]||(d[11]=o=>a.motor.profile.kval_dec=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.996",step:"0.004","aria-label":e.deviceId+" kval dec","aria-describedby":e.deviceId+"-profile-kval_dec-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-intersect_speed-text"},{default:i(()=>[c(" Intersect Speed (rps) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-intersect_speed",modelValue:a.motor.profile.intersect_speed,"onUpdate:modelValue":d[12]||(d[12]=o=>a.motor.profile.intersect_speed=o),modelModifiers:{number:!0},type:"number",min:"0",max:"4.8825",step:"0.000298","aria-label":e.deviceId+" intersect speed","aria-describedby":e.deviceId+"-profile-intersect_speed-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-start_slope-text"},{default:i(()=>[c(" Start Slope (sec/step) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-start_slope",modelValue:a.motor.profile.start_slope,"onUpdate:modelValue":d[13]||(d[13]=o=>a.motor.profile.start_slope=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.004",step:"0.000015","aria-label":e.deviceId+" start slope","aria-describedby":e.deviceId+"-profile-start_slope-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-acceleration_final_slope-text"},{default:i(()=>[c(" Acc Final Slope (sec/step) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-acceleration_final_slope",modelValue:a.motor.profile.acceleration_final_slope,"onUpdate:modelValue":d[14]||(d[14]=o=>a.motor.profile.acceleration_final_slope=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.004",step:"0.000015","aria-label":e.deviceId+" acceleration final slope","aria-describedby":e.deviceId+"-profile-acceleration_final_slope-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-deceleration_final_slope-text"},{default:i(()=>[c(" Dec Final Slope (sec/step) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-deceleration_final_slope",modelValue:a.motor.profile.deceleration_final_slope,"onUpdate:modelValue":d[15]||(d[15]=o=>a.motor.profile.deceleration_final_slope=o),modelModifiers:{number:!0},type:"number",min:"0",max:"0.004",step:"0.000015","aria-label":e.deviceId+" deceleration final slope","aria-describedby":e.deviceId+"-profile-deceleration_final_slope-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-thermal_compensation_factor-text"},{default:i(()=>[c(" Thermal Compensation Factor ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-thermal_compensation_factor",modelValue:a.motor.profile.thermal_compensation_factor,"onUpdate:modelValue":d[16]||(d[16]=o=>a.motor.profile.thermal_compensation_factor=o),modelModifiers:{number:!0},type:"number",min:"1",max:"1.46875",step:"0.03125","aria-label":e.deviceId+" thermal compensation factor","aria-describedby":e.deviceId+"-profile-thermal_compensation_factor-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-overcurrent_threshold-text"},{default:i(()=>[c(" Overcurrent Threshold (A) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-overcurrent_threshold",modelValue:a.motor.profile.overcurrent_threshold,"onUpdate:modelValue":d[17]||(d[17]=o=>a.motor.profile.overcurrent_threshold=o),modelModifiers:{number:!0},type:"number",min:"0.375",max:"6",step:"0.375","aria-label":e.deviceId+" overcurrent threshold","aria-describedby":e.deviceId+"-profile-overcurrent_threshold-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-stall_threshold-text"},{default:i(()=>[c(" Stall Threshold (A) ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-stall_threshold",modelValue:a.motor.profile.stall_threshold,"onUpdate:modelValue":d[18]||(d[18]=o=>a.motor.profile.stall_threshold=o),modelModifiers:{number:!0},type:"number",min:"0.3125",max:"4",step:"0.3125","aria-label":e.deviceId+" stall threshold","aria-describedby":e.deviceId+"-profile-stall_threshold-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-step_mode-text"},{default:i(()=>[c(" Step Mode ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-step_mode",modelValue:a.motor.profile.step_mode,"onUpdate:modelValue":d[19]||(d[19]=o=>a.motor.profile.step_mode=o),modelModifiers:{number:!0},type:"number",min:"0",max:"7",step:"1","aria-label":e.deviceId+" step mode","aria-describedby":e.deviceId+"-profile-step_mode-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(b,{class:"mb-1"},{default:i(()=>[l(u,{id:e.deviceId+"-profile-alarm_enable-text"},{default:i(()=>[c(" Alarm Enable ")]),_:1},8,["id"]),l(n,{id:e.deviceId+"-profile-alarm_enable",modelValue:a.motor.profile.alarm_enable,"onUpdate:modelValue":d[20]||(d[20]=o=>a.motor.profile.alarm_enable=o),modelModifiers:{number:!0},"aria-label":e.deviceId+" alarm enable","aria-describedby":e.deviceId+"-profile-alarm_enable-text",disabled:e.disabled},null,8,["id","modelValue","aria-label","aria-describedby","disabled"])]),_:1}),l(B,{id:e.deviceId+"-profile-clockwise",modelValue:a.motor.profile.clockwise,"onUpdate:modelValue":d[21]||(d[21]=o=>a.motor.profile.clockwise=o),"aria-label":e.deviceId+" clockwise","aria-describedby":e.deviceId+"-profile-clockwise-text",disabled:e.disabled,label:"Clockwise",reverse:!0},null,8,["id","modelValue","aria-label","aria-describedby","disabled"]),l(v,{type:"button",color:"success",disabled:e.disabled,onClick:r.handleSetProfileButtonClick},{default:i(()=>[c(" Save ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["visible"])):h("",!0)]),_:1})]),_:1},8,["style"])}const Ie=y(ve,[["render",Ce]]),ye={name:"ThermometerControl",components:{CCard:E,CCardBody:N,CButton:F,CFormInput:O,CIcon:U,CInputGroup:z,CInputGroupText:W,CCardTitle:R,CCardSubtitle:L},props:{disabled:{type:Boolean,default:!1},label:{type:String,default:"Thermometer"},deviceId:{type:String,required:!0}},setup(){return{}},computed:{data(){return this.getDeviceById(this.deviceId)},stateText(){return this.data!=null?this.data.state_string:"Undefined"},state(){return this.data!=null?this.data.state_id:"UNDEFINED"},value(){return this.data!=null?parseFloat(this.data.value).toFixed(2):"?"},...V("machine",["getDeviceById"]),...S(["debug"])},methods:{handleRefreshClick(){this.$store.dispatch("machine/deviceCommand",{deviceId:this.deviceId,command:"measure"}).then(t=>{console.debug(t)}).catch(t=>{this.$store.dispatch("notifyWarning",{content:t.response.data})})}}};function ge(t,d,e,g,a,r){const _=s("CCardTitle"),p=s("CCardSubtitle"),v=s("CIcon"),n=s("CButton"),u=s("CFormInput"),b=s("CInputGroupText"),B=s("CInputGroup"),x=s("CCardBody"),w=s("CCard");return m(),f(w,{style:{width:"14rem"},class:"m-2 thermometer-control"},{default:i(()=>[l(x,null,{default:i(()=>[l(_,null,{default:i(()=>[c("Thermometer")]),_:1}),l(p,{class:"mb-2 text-muted"},{default:i(()=>[c(C(e.label),1)]),_:1}),l(B,{class:"mb-3"},{default:i(()=>[l(n,{type:"button",color:"success",variant:"outline",class:I(r.state=="WORKING"?"active":""),disabled:e.disabled,onClick:r.handleRefreshClick},{default:i(()=>[l(v,{icon:"cilLoopCircular",size:"xl"})]),_:1},8,["class","disabled","onClick"]),l(u,{id:e.deviceId+"-value",modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=M=>r.value=M),placeholder:"?","aria-label":e.label+" themperature","aria-describedby":e.deviceId+"-inputLabel",readonly:""},null,8,["id","modelValue","aria-label","aria-describedby"]),l(b,{id:e.deviceId+"-inputLabel"},{default:i(()=>[c(" °C ")]),_:1},8,["id"])]),_:1})]),_:1})]),_:1})}const Ve=y(ye,[["render",ge]]),xe={components:{ReactorControl:_e,Pump:Ie,Thermometer:Ve,CRow:Y},data(){return{controlsVisible:!1}},computed:{...S("device",["calibrationModeEnabled","stirrers","pumps","valves","ods"]),...S(["debug"]),...V("machine",{deviceConnected:"isConnected",deviceControlEnabled:"isManualControlEnabled"})},mounted(){},methods:{...q("device",["toggleCalibrationMode","setDeviceControlEnabled"]),...G("device",["getAllDeviceData"]),...G(["connectDevice"])}};function ke(t,d,e,g,a,r){const _=s("ReactorControl"),p=s("CRow"),v=s("Pump"),n=s("Thermometer");return m(),k("div",{class:I(["DeviceControl container-fluid",{"device-disconnected":t.deviceConnected===!1}])},[l(p,null,{default:i(()=>[(m(),k(H,null,X(7,u=>l(_,{id:u,key:u,disabled:!t.deviceControlEnabled},null,8,["id","disabled"])),64))]),_:1}),t.debug?(m(),f(p,{key:0},{default:i(()=>[l(v,{disabled:!t.deviceControlEnabled,"device-id":"pump-1",label:"[1] Main pump"},null,8,["disabled"]),l(v,{disabled:!t.deviceControlEnabled,"device-id":"pump-2",label:"[2] Drug pump"},null,8,["disabled"]),l(v,{disabled:!t.deviceControlEnabled,"device-id":"pump-4",label:"[4] Waste pump"},null,8,["disabled"])]),_:1})):h("",!0),l(p,null,{default:i(()=>[l(n,{disabled:!t.deviceControlEnabled,"device-id":"thermometer-0x48",label:"Main board"},null,8,["disabled"]),l(n,{disabled:!t.deviceControlEnabled,"device-id":"thermometer-0x49",label:"Reactor 1"},null,8,["disabled"]),l(n,{disabled:!t.deviceControlEnabled,"device-id":"thermometer-0x4a",label:"Reactor 7"},null,8,["disabled"])]),_:1})],2)}const Fe=y(xe,[["render",ke],["__scopeId","data-v-7d6bcd73"]]);export{Fe as default};
//# sourceMappingURL=DeviceControl-NbDlFM8C.js.map
