import{a as m}from"./index-BWIQLakd.js";import{CButton as b,CFormSelect as g}from"./index.es-fMuEa2gX.js";import{C as x}from"./index.es-DYZfjILo.js";import{a as u,b as f,c as h,d as a,q as c,t as l,v as p,F as v,z as y,A as k}from"./index-Cu3QcvOp.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vuex.esm-bundler-CuEAE9ua.js";const F={name:"StatusTab",components:{CButton:b,CIcon:x,CFormSelect:g},data(){return{status_text:"",msg:"StatusTab",camera_image:null,selectedFormat:"html"}},methods:{download_db:function(){m.get("/download_db",{responseType:"blob"}).then(e=>{const n=new Blob([e.data],{type:"application/octet-stream"}),t=document.createElement("a");t.href=URL.createObjectURL(n),t.download=document.title+"_replifactory.db",document.body.appendChild(t),t.click(),document.body.removeChild(t)}).catch(e=>{console.error(e)})},get_info:function(){m.get("/get_info").then(e=>{this.status_text=e.data.replace(/\n/g,"<br />")}).catch(e=>{console.error(e)})},export_data:function(e,n){m.get(`/export/${e}/${n}`,{responseType:"blob"}).then(t=>{const r=new Blob([t.data],{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(r),o.download=`vial_${e}_data.${n}`,document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(t=>{console.error(t)})},capture_image:function(){m.get("/capture",{responseType:"arraybuffer"}).then(e=>{const n=btoa(new Uint8Array(e.data).reduce((t,r)=>t+String.fromCharCode(r),""));this.camera_image="data:image/jpeg;base64,"+n}).catch(e=>{console.error(e)})}}},T={class:"d-flex justify-content-start mt-3"},B={class:"d-flex flex-wrap mt-3"},S=a("div",{class:"d-flex align-items-center mr-3"}," Export Data ",-1),L=a("option",{disabled:"",value:""},"Please select a format",-1),U=a("option",null,"csv",-1),V=a("option",null,"html",-1),j={class:"mt-3"},z=["src"],E=["innerHTML"];function I(e,n,t,r,o,i){const _=u("CIcon"),d=u("CButton"),C=u("CFormSelect");return f(),h("div",null,[a("div",T,[c(d,{color:"info",class:"mr-3",onClick:i.capture_image},{default:l(()=>[c(_,{icon:"cilCamera",size:"xl"}),p(" photo ")]),_:1},8,["onClick"]),c(d,{color:"success",class:"mr-3",onClick:i.download_db},{default:l(()=>[c(_,{icon:"cilCloudDownload",size:"xl"}),p(" download database ")]),_:1},8,["onClick"]),c(d,{color:"primary",onClick:i.get_info},{default:l(()=>[c(_,{icon:"cilInfo",size:"xl"})]),_:1},8,["onClick"])]),a("div",B,[S,c(C,{"model-value":o.selectedFormat,class:"mr-3","onUpdate:modelValue":n[0]||(n[0]=s=>o.selectedFormat=s)},{default:l(()=>[L,U,V]),_:1},8,["model-value"]),a("div",null,[(f(),h(v,null,y(7,s=>c(d,{key:"vial"+s,color:"info",class:"mr-1",onClick:R=>i.export_data(s,o.selectedFormat)},{default:l(()=>[p(" Vial "+k(s),1)]),_:2},1032,["onClick"])),64))])]),a("div",j,[a("img",{src:o.camera_image,class:"img-fluid"},null,8,z)]),a("div",{class:"mt-3",innerHTML:o.status_text},null,8,E)])}const q=w(F,[["render",I]]);export{q as default};
//# sourceMappingURL=StatusTab-B_daskKw.js.map
